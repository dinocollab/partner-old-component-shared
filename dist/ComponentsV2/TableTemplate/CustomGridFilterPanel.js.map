{"version":3,"file":"CustomGridFilterPanel.js","sources":["../../../src/ComponentsV2/TableTemplate/CustomGridFilterPanel.tsx"],"sourcesContent":["import React from 'react'\r\nimport { Button } from '@mui/material'\r\nimport { GridPanelWrapper, GridFilterForm, useGridApiContext } from '@mui/x-data-grid'\r\nimport { GridFilterItem, GridLinkOperator, GridAddIcon, GridPanelContent, GridPanelFooter } from '@mui/x-data-grid'\r\n\r\ninterface CustomGridFilterPanelProps {\r\n  disableMultipleColumnsFiltering?: boolean\r\n}\r\n\r\nexport const CustomGridFilterPanel: React.FC<CustomGridFilterPanelProps> = (props) => {\r\n  const apiRef = useGridApiContext()\r\n  const gridState = apiRef.current.state\r\n\r\n  const hasMultipleFilters = React.useMemo(\r\n    () => gridState.filter.filterModel.items.length > 1,\r\n    [gridState.filter.filterModel.items.length]\r\n  )\r\n\r\n  const applyFilter = React.useCallback(\r\n    (item: GridFilterItem) => {\r\n      apiRef!.current.upsertFilterItem(item)\r\n    },\r\n    [apiRef]\r\n  )\r\n\r\n  const applyFilterLinkOperator = React.useCallback(\r\n    (operator: GridLinkOperator) => {\r\n      apiRef!.current.setFilterLinkOperator(operator)\r\n    },\r\n    [apiRef]\r\n  )\r\n\r\n  const addNewFilter = React.useCallback(() => {\r\n    const columns = gridState.columns.all.map((key) => gridState.columns.lookup[key]).filter((x) => x.filterable)\r\n    if (columns.length < 1) {\r\n      return\r\n    }\r\n    const col = apiRef!.current.getColumn(columns[0].field)\r\n    if (!col.filterOperators) {\r\n      return\r\n    }\r\n    const newItem = {\r\n      columnField: columns[0].field,\r\n      operatorValue: col.filterOperators[0].value,\r\n    }\r\n    apiRef!.current.upsertFilterItem(newItem)\r\n  }, [apiRef, gridState.columns.all, gridState.columns.lookup])\r\n\r\n  const deleteFilter = React.useCallback(\r\n    (item: GridFilterItem) => {\r\n      apiRef!.current.deleteFilterItem(item)\r\n    },\r\n    [apiRef]\r\n  )\r\n\r\n  React.useEffect(() => {\r\n    if (gridState.filter.filterModel.items.length === 0) {\r\n      addNewFilter()\r\n    }\r\n  }, [addNewFilter, gridState.filter.filterModel.items.length])\r\n\r\n  return (\r\n    <GridPanelWrapper>\r\n      <GridPanelContent>\r\n        {gridState.filter.filterModel.items.map((item, index) => (\r\n          <GridFilterForm\r\n            key={item.id}\r\n            item={item}\r\n            applyFilterChanges={applyFilter}\r\n            deleteFilter={deleteFilter}\r\n            hasMultipleFilters={hasMultipleFilters}\r\n            showMultiFilterOperators={index > 0}\r\n            multiFilterOperator={gridState.filter.filterModel.linkOperator}\r\n            disableMultiFilterOperator={index !== 1}\r\n            applyMultiFilterOperatorChanges={applyFilterLinkOperator}\r\n          />\r\n        ))}\r\n      </GridPanelContent>\r\n      <GridPanelFooter>\r\n        <Button onClick={addNewFilter} startIcon={<GridAddIcon />} color=\"primary\">\r\n          {apiRef!.current.getLocaleText('filterPanelAddFilter')}\r\n        </Button>\r\n      </GridPanelFooter>\r\n    </GridPanelWrapper>\r\n  )\r\n}\r\n"],"names":["CustomGridFilterPanel","props","apiRef","useGridApiContext","gridState","current","state","hasMultipleFilters","React","useMemo","filter","filterModel","items","length","applyFilter","useCallback","item","upsertFilterItem","applyFilterLinkOperator","operator","setFilterLinkOperator","addNewFilter","columns","all","map","key","lookup","x","filterable","col","getColumn","field","filterOperators","newItem","columnField","operatorValue","value","deleteFilter","deleteFilterItem","useEffect","_jsxs","GridPanelWrapper","children","_jsx","GridPanelContent","index","GridFilterForm","applyFilterChanges","showMultiFilterOperators","multiFilterOperator","linkOperator","disableMultiFilterOperator","applyMultiFilterOperatorChanges","id","GridPanelFooter","Button","onClick","startIcon","GridAddIcon","color","getLocaleText"],"mappings":"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"}