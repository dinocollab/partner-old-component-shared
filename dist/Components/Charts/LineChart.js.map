{"version":3,"file":"LineChart.js","sources":["../../../src/Components/Charts/LineChart.tsx"],"sourcesContent":["import React, { FC, useState } from 'react'\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Tooltip, Legend, ChartData, Filler } from 'chart.js'\r\nimport { Line } from 'react-chartjs-2'\r\nimport { ChartOptions } from 'chart.js'\r\nimport { faker } from '@faker-js/faker'\r\nimport { mergeDeep } from '../Helper'\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  // Title,\r\n  Tooltip,\r\n  Filler,\r\n  Legend,\r\n  {\r\n    id: 'uniqueid5', //typescript crashes without id,\r\n    afterDraw: (chart, easing) => {\r\n      const activePoints = chart.tooltip?.getActiveElements() ?? []\r\n      if (activePoints.length) {\r\n        const activePoint = activePoints[0]\r\n        const ctx = chart.ctx\r\n        const x = activePoint.element.x\r\n        const topY = chart.scales.y?.top\r\n        const bottomY = chart.scales.y?.bottom\r\n        ctx.save()\r\n        ctx.beginPath()\r\n        ctx.moveTo(x, topY)\r\n        ctx.lineTo(x, bottomY)\r\n        ctx.lineWidth = 1\r\n        ctx.strokeStyle = '#a5b4c3'\r\n        ctx.stroke()\r\n        ctx.restore()\r\n      }\r\n    }\r\n  }\r\n)\r\n\r\nexport const options: ChartOptions<'line'> = {\r\n  responsive: true,\r\n  maintainAspectRatio: false,\r\n  interaction: {\r\n    mode: 'index',\r\n    intersect: false\r\n  },\r\n  // elements: {\r\n  //     line: {\r\n  //         tension: 0.1  // smooth lines,\r\n  //     },\r\n  // },\r\n  hover: {\r\n    intersect: false\r\n  },\r\n  plugins: {\r\n    legend: {\r\n      position: 'top' as const\r\n    }\r\n    // title: {\r\n    //     display: true,\r\n    //     text: 'Chart.js Bar Chart',\r\n    // },\r\n    // tooltip: {\r\n    //     callbacks: {\r\n    //         label: function (context) {\r\n    //             let label = context.label || context.dataset.label || '';\r\n    //             if (label) {\r\n    //                 label += ': ';\r\n    //             }\r\n    //             if (context.parsed.y !== null) {\r\n    //                 label += FormatterUSD().format(context.parsed.y);\r\n    //             }\r\n    //             return label;\r\n    //         }\r\n    //     }\r\n    // },\r\n  },\r\n  scales: {\r\n    // \"yAxes\": {\r\n    //     ticks: {\r\n    //         callback: function (value, index, values) {\r\n    //             return FormatterUSD().format(value as number)\r\n    //         }\r\n    //     }\r\n    // }\r\n    x: {\r\n      ticks: {\r\n        // For a category axis, the val is the index so the lookup via getLabelForValue is needed\r\n        callback: function (val, index, ticks) {\r\n          const amount = Math.floor(ticks.length / 6)\r\n          // Hide every amount  tick label\r\n          return index % amount === 0 ? (typeof val === 'string' ? val : this.getLabelForValue(val)) : null\r\n        },\r\n        maxRotation: 0,\r\n        align: 'inner'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const monthLabels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n\r\nexport const data = {\r\n  labels: monthLabels,\r\n  datasets: [\r\n    {\r\n      label: 'Dataset 1',\r\n      data: monthLabels.map(() => faker.datatype.number({ min: 0, max: 1000 })),\r\n      backgroundColor: 'rgba(255, 99, 132, 0.5)'\r\n    },\r\n    {\r\n      label: 'Dataset 2',\r\n      data: monthLabels.map(() => faker.datatype.number({ min: 0, max: 1000 })),\r\n      backgroundColor: 'rgba(53, 162, 235, 0.5)'\r\n    }\r\n  ]\r\n}\r\n\r\ninterface LineChartProps {\r\n  width?: number | string\r\n  height?: number | string\r\n  data: ChartData<'line', number[], string>\r\n  options?: ChartOptions<'line'>\r\n}\r\nexport const LineChart: FC<LineChartProps> = (props) => {\r\n  const { data, options: optionProps, ...other } = props\r\n  const [opt, setOpt] = useState(mergeDeep<ChartOptions<'line'>>({}, options, optionProps ?? {}))\r\n  return <Line options={opt} data={data} {...other} />\r\n}\r\n"],"names":["ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Tooltip","Filler","Legend","id","afterDraw","chart","easing","_chart$tooltip$getAct","_chart$tooltip","activePoints","tooltip","getActiveElements","length","_chart$scales$y","_chart$scales$y2","activePoint","ctx","x","element","topY","scales","y","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","options","responsive","maintainAspectRatio","interaction","mode","intersect","hover","plugins","legend","position","ticks","callback","val","index","amount","Math","floor","getLabelForValue","maxRotation","align","monthLabels","data","labels","datasets","label","map","faker","datatype","number","min","max","backgroundColor","LineChart","props","optionProps","other","_objectWithoutProperties","_excluded","_useState","useState","mergeDeep","_useState2","_slicedToArray","opt","setOpt","_jsx","Line","_objectSpread"],"mappings":"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"}