{"version":3,"file":"PieChart.js","sources":["../../../src/Components/Charts/PieChart.tsx"],"sourcesContent":["import React, { Component, FC, useEffect, useState } from 'react'\r\nimport { Chart, ArcElement, Tooltip, Legend, ChartData, ChartOptions } from 'chart.js'\r\nimport { Pie } from 'react-chartjs-2'\r\nimport { FormatterUSD } from 'partner-local-lib/helper'\r\nimport { IChartDataItem } from './type'\r\n\r\nChart.register(ArcElement, Tooltip, Legend)\r\n\r\nconst createPieChartData = (params: IChartDataItem[], labelName: string = '# of Votes') => {\r\n  const initial: ChartData<'pie', number[], string> = {\r\n    labels: [],\r\n    datasets: [{ label: labelName, borderWidth: 1, data: [], backgroundColor: [] as string[], borderColor: [] as string[] }],\r\n  }\r\n  return params.reduce((acc, cur) => {\r\n    acc.labels?.push(cur.label)\r\n    acc.datasets[0].data.push(cur.data)\r\n    if (Array.isArray(acc.datasets[0].backgroundColor)) acc.datasets[0].backgroundColor.push(cur.backgroundColor)\r\n    if (Array.isArray(acc.datasets[0].borderColor)) acc.datasets[0].borderColor.push(cur.borderColor)\r\n    return acc\r\n  }, initial)\r\n}\r\n\r\nconst defaultData: IChartDataItem[] = [\r\n  { label: 'Red', data: 12, backgroundColor: 'rgba(255, 99, 132, 0.2)', borderColor: 'rgba(255, 99, 132, 1)' },\r\n  { label: 'Blue', data: 19, backgroundColor: 'rgba(54, 162, 235, 0.2)', borderColor: 'rgba(54, 162, 235, 1)' },\r\n  { label: 'Yellow', data: 3, backgroundColor: 'rgba(255, 206, 86, 0.2)', borderColor: 'rgba(255, 206, 86, 1)' },\r\n  { label: 'Green', data: 5, backgroundColor: 'rgba(75, 192, 192, 0.2)', borderColor: 'rgba(75, 192, 192, 1)' },\r\n  { label: 'Purple', data: 2, backgroundColor: 'rgba(153, 102, 255, 0.2)', borderColor: 'rgba(153, 102, 255, 1)' },\r\n  { label: 'Orange', data: 3, backgroundColor: 'rgba(255, 159, 64, 0.2)', borderColor: 'rgba(255, 159, 64, 1)' },\r\n]\r\n\r\ninterface PieChartProps {\r\n  width?: number | string\r\n  height?: number | string\r\n  data: ChartData<'pie', number[], string>\r\n  disableTooltip?: boolean\r\n}\r\nexport const PieChartV2: FC<PieChartProps> = (props) => {\r\n  const { data, disableTooltip, ...other } = props\r\n  const [options, setOptions] = useState<ChartOptions<'pie'>>({\r\n    responsive: true,\r\n    plugins: {\r\n      legend: { position: 'top' as const },\r\n      tooltip: {\r\n        enabled: disableTooltip !== true,\r\n        callbacks: {\r\n          label: function (context) {\r\n            let label = context.label || context.dataset.label || ''\r\n            if (label) label += ': '\r\n            if (context.parsed !== null) label += FormatterUSD().format(context.parsed)\r\n            return label\r\n          },\r\n        },\r\n      },\r\n    },\r\n  })\r\n  useEffect(() => {\r\n    if (options.plugins && options.plugins.tooltip) {\r\n      options.plugins.tooltip.enabled = props.disableTooltip !== true\r\n      setOptions((op) => ({ ...op }))\r\n    }\r\n  }, [options.plugins, options.plugins?.tooltip?.enabled, props.disableTooltip])\r\n  return <Pie options={options} data={data} {...other} />\r\n}\r\n\r\ninterface IProps {\r\n  data?: IChartDataItem[]\r\n}\r\nexport class PieChart extends Component<IProps> {\r\n  static defaultProps = { data: defaultData }\r\n  render() {\r\n    return <Pie data={createPieChartData(this.props.data ?? [])} />\r\n  }\r\n}\r\n"],"names":["Chart","register","ArcElement","Tooltip","Legend","createPieChartData","params","labelName","arguments","length","undefined","initial","labels","datasets","label","borderWidth","data","backgroundColor","borderColor","reduce","acc","cur","_acc$labels","push","Array","isArray","defaultData","PieChartV2","props","_options$plugins","disableTooltip","other","_objectWithoutProperties","_excluded","_useState","useState","responsive","plugins","legend","position","tooltip","enabled","callbacks","context","dataset","parsed","FormatterUSD","format","_useState2","_slicedToArray","options","setOptions","useEffect","op","_objectSpread","_jsx","Pie","PieChart","_Component","_classCallCheck","_callSuper","_inherits","_createClass","key","value","render","_this$props$data","Component"],"mappings":"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"}