{"version":3,"file":"index.js","sources":["../../../src/Components/FlexInfiniteScroll/index.tsx"],"sourcesContent":["import { Box, SxProps, Theme } from '@mui/material'\r\nimport React, { Component } from 'react'\r\nimport LazySpinner from '../Helper/LazySpinner'\r\n\r\n\r\nexport type TActionLoadMore = (sender: FlexInfiniteScroll) => void\r\ninterface FlexInfiniteScrollProps {\r\n    ContainerSx?: SxProps<Theme>\r\n    ContentSx?: SxProps<Theme>\r\n    onLoadMore?: TActionLoadMore\r\n    lock?: boolean\r\n    loading?: boolean\r\n}\r\ninterface FlexInfiniteScrollState {\r\n    lock: boolean\r\n    loading: boolean\r\n}\r\nexport default class FlexInfiniteScroll extends Component<FlexInfiniteScrollProps, FlexInfiniteScrollState> {\r\n    constructor(props: FlexInfiniteScrollProps) {\r\n        super(props)\r\n        this.state = {\r\n            loading: props.loading || false,\r\n            lock: props.lock || !props.onLoadMore\r\n        }\r\n    }\r\n    loadMore = () => {\r\n        if (!this.props.onLoadMore) return\r\n        this.props.onLoadMore(this)\r\n    }\r\n    lock = () => {\r\n        this.setState({ lock: true })\r\n    }\r\n    getHeightItem = () => 340\r\n    isLoading = () => this.props.loading || this.props.lock || this.state.loading || this.state.lock\r\n    isPinShow = () => (this.props.loading || this.state.loading) && (!this.state.lock || !this.props.lock)\r\n    onScroll: React.UIEventHandler<HTMLDivElement> = (event) => {\r\n        if (this.isLoading()) return;\r\n        const scrollHeight = this.refScrollView?.scrollHeight ?? 0\r\n        const height = this.refScrollView?.offsetHeight ?? 0\r\n        const position = this.refScrollView?.scrollTop ?? 0\r\n        if (scrollHeight - position - height < this.getHeightItem() * 3) {\r\n            this.loadMore()\r\n        }\r\n    }\r\n    refScrollView: HTMLDivElement | null = null\r\n    render() {\r\n        return (\r\n            <Box\r\n                sx={{ display: 'flex', flex: 1, overflowY: \"auto\", ...(this.props.ContainerSx || {}) }}\r\n                component={'div'}\r\n                ref={ref => this.refScrollView = ref as HTMLDivElement}\r\n                className=\"flex-infinite-scroll\"\r\n                onScroll={this.onScroll}\r\n            >\r\n                <Box sx={{ height: 0, ...(this.props.ContentSx || {}) }}>\r\n                    {this.props.children}\r\n                    {this.isPinShow() ?\r\n                        <Box sx={{ width: '100%', margin: \"10px 0\" }}>\r\n                            <LazySpinner />\r\n                        </Box>\r\n                        : ''\r\n                    }\r\n                </Box>\r\n            </Box>\r\n        )\r\n    }\r\n}\r\n"],"names":["FlexInfiniteScroll","_Component","props","_this","_classCallCheck","_callSuper","_defineProperty","onLoadMore","setState","lock","loading","state","event","_this$refScrollView$s","_this$refScrollView","_this$refScrollView$o","_this$refScrollView2","_this$refScrollView$s2","_this$refScrollView3","isLoading","scrollHeight","refScrollView","height","offsetHeight","position","scrollTop","getHeightItem","loadMore","_inherits","_createClass","key","value","render","_this2","_jsx","Box","sx","_objectSpread","display","flex","overflowY","ContainerSx","component","ref","className","onScroll","_jsxs","ContentSx","children","isPinShow","width","margin","LazySpinner","Component"],"mappings":"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"}