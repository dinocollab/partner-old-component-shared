{"version":3,"file":"index.js","sources":["../../../src/Components/EditAvatar/index.tsx"],"sourcesContent":["import { Box, IconButton, SxProps, Theme } from '@mui/material'\r\nimport Modal from '@mui/material/Modal'\r\nimport React, { Component } from 'react'\r\nimport './index.css'\r\nimport Avatar from 'react-avatar-edit'\r\nimport { CSSProperties } from '@mui/styles'\r\nimport { Edit } from '@mui/icons-material'\r\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline'\r\ninterface EditAvatarProps {\r\n  sx?: SxProps<Theme>\r\n  onSave?: (image: string) => void\r\n  extra?: any\r\n}\r\ninterface EditAvatarState {\r\n  preview?: string\r\n  src?: string\r\n  labelStyle: CSSProperties\r\n}\r\nexport default class EditAvatar extends Component<EditAvatarProps, EditAvatarState> {\r\n  constructor(props: EditAvatarProps) {\r\n    super(props)\r\n    this.state = {\r\n      labelStyle: {\r\n        color: 'red',\r\n        fontSize: '24px'\r\n      }\r\n    }\r\n    this.onCrop = this.onCrop.bind(this)\r\n    this.onClose = this.onClose.bind(this)\r\n  }\r\n  onClose() {\r\n    if (this.refInput) {\r\n      this.refInput.value = ''\r\n    }\r\n    this.setState({ preview: undefined, src: undefined })\r\n  }\r\n\r\n  onCrop(preview: any) {\r\n    this.setState({ preview })\r\n  }\r\n  renderEditAvatar = () => {\r\n    return (\r\n      <Avatar\r\n        width={390}\r\n        height={295}\r\n        minCropRadius={100}\r\n        onCrop={this.onCrop}\r\n        onClose={this.onClose}\r\n        borderStyle={{ display: 'none' }}\r\n        src={this.state.src}\r\n        labelStyle={this.state.labelStyle}\r\n      />\r\n    )\r\n  }\r\n  onEditClick = () => {\r\n    this.refInput?.click()\r\n  }\r\n  onChange = () => {\r\n    if (!this.refInput || !this.refInput.files) return\r\n    const file = this.refInput.files[0]\r\n    this.setState({ src: URL.createObjectURL(file) })\r\n  }\r\n  refInput: HTMLInputElement | null = null\r\n  onSave = () => {\r\n    this.onClose()\r\n    this.state.preview && this.props.onSave && this.props.onSave(this.state.preview)\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <Box className='container-edit' sx={{ position: 'relative', minWidth: '100px', minHeight: '100px', ...(this.props.sx ?? {}) }}>\r\n          {this.props.children}\r\n          <a onClick={this.onEditClick} className='overlay-edit'>\r\n            <Edit />\r\n          </a>\r\n          <input onChange={this.onChange} accept='image/*' type='file' ref={(ref) => (this.refInput = ref)} hidden />\r\n        </Box>\r\n        <Modal\r\n          open={!!this.state.src}\r\n          aria-labelledby='edit-avatar-title'\r\n          aria-describedby='edit-avatar-description'\r\n          sx={{\r\n            height: '100vh',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              background: '#e0e0e0',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            {this.renderEditAvatar()}\r\n            <IconButton onClick={this.onSave} sx={{ color: 'white', position: 'absolute', right: 0, top: 0, p: '7px' }}>\r\n              <CheckCircleOutlineIcon />\r\n            </IconButton>\r\n          </Box>\r\n        </Modal>\r\n      </>\r\n    )\r\n  }\r\n}\r\n"],"names":["EditAvatar","_Component","props","_this","_classCallCheck","_callSuper","_defineProperty","_jsx","Avatar","width","height","minCropRadius","onCrop","onClose","borderStyle","display","src","state","labelStyle","_this$refInput","refInput","click","files","file","setState","URL","createObjectURL","preview","onSave","color","fontSize","bind","_inherits","_createClass","key","value","undefined","render","_this$props$sx","_this2","_jsxs","_Fragment","children","Box","className","sx","_objectSpread","position","minWidth","minHeight","onClick","onEditClick","Edit","onChange","accept","type","ref","hidden","Modal","open","justifyContent","alignItems","background","renderEditAvatar","IconButton","right","top","p","CheckCircleOutlineIcon","Component"],"mappings":"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"}